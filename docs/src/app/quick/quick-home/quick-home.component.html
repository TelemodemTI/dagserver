<div class="page-wrapper">
    <!-- ******Header****** -->
    <header id="header" class="header">
        <div class="container">
            <div class="branding">
                <h1 class="logo">
                    <a href="index.html">
                        <span aria-hidden="true" class="icon_documents_alt icon"></span>
                        <span class="text-highlight">Dagserver</span><span class="text-bold">Documentation</span>
                    </a>
                </h1>
                
            </div><!--//branding-->
            
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active">Quick Start</li>
            </ol>
            
            <div class="top-search-box">
                 <form class="form-inline search-form justify-content-center" action="" method="get">
            
                    <input type="text" placeholder="Search..." name="search" class="form-control search-input">
                    
                    <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
                    
                </form>
            </div>
            
        </div><!--//container-->
    </header><!--//header-->
    <div class="doc-wrapper">
        <div class="container">
            <div id="doc-header" class="doc-header text-center">
                <h1 class="doc-title"><i class="icon fa fa-paper-plane"></i> Quick Start</h1>
                <div class="meta"><i class="far fa-clock"></i> Last updated: 09 Sept 2023</div>
            </div><!--//doc-header-->
            <div class="doc-body row">
                <div class="doc-content col-md-9 col-12 order-1">
                    <div class="content-inner">
                        <section id="download-section" class="doc-section " tabindex="-1">
                            <h2 class="section-title">Requirements</h2>
                            <div class="section-block">
                                <p>For the quick demo a docker image will be used to build and run the application, therefore, you must have a docker installation available</p>
                            </div>
                        </section><!--//doc-section-->
                        <section id="installation-section" class="doc-section" tabindex="-1">
                            <h2 class="section-title">Get Started</h2>
                            <div id="step1"  class="section-block" tabindex="-1">
                                <h3 class="block-title">Step One</h3>
                                <p>Copy the docker-compose file included in the repository, to a path on your local machine, and then edit it, as follows</p>
                                <pre><code class="language-yaml">
                                    version: "3.9"  # optional since v1.27.0
                                    services:
                                      dagserver:
                                        image: maximolira/dagserver:latest
                                        container_name: dagserver
                                        ports:
                                          - "65002:8080"
                                          - "65003:2587"
                                        extra_hosts:
                                          - "host.docker.internal:host-gateway"
                                        environment:
                                        - DAGSERVERURI=http://localhost:65002/dagserver/query
                                        - APP_JDBC_URL=jdbc:mysql://host.docker.internal:65306/scheduler?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
                                        - APP_JDBC_USER=scheduler_user
                                        - APP_JDBC_PASSWORD=password
                                        volumes:
                                        - "/home/ec2-user/dags/:/root/dags/"
                                        networks:
                                          vpcbr:
                                            ipv4_address: 10.5.0.3
                                    networks:
                                      vpcbr:
                                        driver: bridge
                                        ipam:
                                         config:
                                           - subnet: 10.5.0.0/16
                                             gateway: 10.5.0.1
                                </code></pre>
                                <p>To set up the core installation, you'll need a Quartz-compatible database. Currently, we provide scripts exclusively for the MySQL (MariaDB) database type. Keeping this in mind, and after editing the relevant environment variables, your docker-compose file should resemble the following</p>
                                <pre><code class="language-yaml">
                                    version: "3.9"  # optional since v1.27.0
                                    services:
                                      dagserver:
                                        image: maximolira/dagserver:latest
                                        container_name: dagserver
                                        depends_on:
                                          db:
                                            condition: service_healthy
                                        ports:
                                          - "65002:8080"
                                          - "65003:2587"
                                        extra_hosts:
                                          - "host.docker.internal:host-gateway"
                                        environment:
                                        - DAGSERVERURI=http://host.docker.internal:65002/dagserver/query
                                        - APP_JDBC_URL=jdbc:mysql://host.docker.internal:65306/scheduler?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
                                        - APP_JDBC_USER=scheduler_user
                                        - APP_JDBC_PASSWORD=password
                                        volumes:
                                        - "/home/ec2-user/dags/:/root/dags/"
                                        networks:
                                          vpcbr:
                                            ipv4_address: 10.5.0.3
                                      db:
                                        image: mysql:8.0
                                        restart: always
                                        environment:
                                          MYSQL_DATABASE: 'scheduler'
                                          MYSQL_USER: 'scheduler_user'
                                          MYSQL_PASSWORD: 'password'
                                          MYSQL_ROOT_PASSWORD: 'password'
                                        healthcheck:
                                                test: ["CMD", "mysqladmin" ,"ping", "-h", "localhost"]
                                                timeout: 20s
                                                retries: 10
                                        ports:
                                          - '65306:3306'
                                        expose:
                                          - '3306'
                                        volumes:
                                          - my-db:/tmp/mysql
                                        networks:
                                          vpcbr:
                                            ipv4_address: 10.5.0.4
                                    networks:
                                      vpcbr:
                                        driver: bridge
                                        ipam:
                                         config:
                                           - subnet: 10.5.0.0/16
                                             gateway: 10.5.0.1
                                    volumes:
                                      my-db: 
                                </code></pre>
                            </div><!--//section-block-->
                            <div id="step2"  class="section-block" tabindex="-1">
                                <h3 class="block-title">Step Two</h3>
                                <p>Run docker container.
                                </p>
                                <div class="code-block">
                                    <h6>In the path where the docker-compose file is located, execute the following command:</h6>
                                    <p><code>docker-compose &lt;up -d&gt;</code></p>
                                </div><!--//code-block-->
                            </div><!--//section-block-->
                        </section><!--//doc-section-->
                        
                        <section id="code-section" class="doc-section" tabindex="-1">
                            <h2 class="section-title">Properties</h2>
                            <div class="section-block">
                                <p>The following are the basic configurations that are needed to run the application:</p>
                                <pre><code class="language-yaml">
                                    application.properties:

                                    param.jwt_secret: Secret of token JWT for authentication
                                    param.jwt_signer: Signer of token
                                    param.jwt_subject: Subject of the token
                                    param.jwt_ttl: Time to live
                                    param.folderpath: Path from where the JAR files will be loaded, which contain the implementation of the DAGs to be executed
                                    log4j.properties:

                                    log4j.appender.file.File: Path from where the execution log file will be saved
                                    quartz.properties:

                                    org.quartz.dataSource.quartzDS.URL: Quartz engine database host
                                    org.quartz.dataSource.quartzDS.user: Quartz engine database user
                                    org.quartz.dataSource.quartzDS.password: Quartz engine database password
                                </code></pre>
                                
                                

                                    
                                
                            </div><!--//section-block-->
                            <div id="html" class="section-block">
                                
                                <div class="callout-block callout-success">
                                    <div class="icon-holder">
                                        <i class="fas fa-thumbs-up"></i>
                                    </div><!--//icon-holder-->
                                    <div class="content">
                                        <h4 class="callout-title">Useful Tip:</h4>
                                        <p>These last three variables can be overridden using the following environment variables:</p>
                                        <p>
                                            APP_JDBC_URL<br>
                                            APP_JDBC_USER<br>
                                            APP_JDBC_PASSWORD<br>
                                            DAGSERVERURI

                                        </p>
                                    </div><!--//content-->
                                </div>
                                
                           
                            </div>
                        </section><!--//doc-section-->
                        
                        <section id="buttons-section" class="doc-section" tabindex="-1">
                            <h2 class="section-title">Credentials</h2>
                            <div class="section-block">
                                <p>                                    
                                    GraphQL Endpoint:<br>
                                    <br>
                                    Front-End: http://:/dagserver/cli<br>
                                    URL: http://:/server/query<br>
                                    Username: dagserver<br>
                                    Password: dagserver<br><br>
                                    The current graphql schema can be checked in the schema.graphql file located at the root of the classpath.<br>

                                </p>
                                
                            </div><!--//section-block-->
                        </section><!--//doc-section-->
                        
                    </div><!--//content-inner-->
                </div><!--//doc-content-->
                <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                    <div id="doc-nav" class="doc-nav">
                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
                                <li class="nav-item">
                                    <a class="nav-link scrollto pointer" (click)="goTo('download-section')">Requirements</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link scrollto pointer" (click)="goTo('installation-section')">Get Started
                                    </a>
                                </li>
                                <nav class="nav doc-sub-menu nav flex-column">
                                    <li class="nav-item">
                                        <a class="nav-link scrollto pointer" (click)="goTo('step1')">Step One</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link scrollto pointer" (click)="goTo('step2')">Step Two</a>
                                    </li>
                                </nav><!--//nav-->
                                <li class="nav-item">
                                    <a class="nav-link scrollto" (click)="goTo('code-section')">Properties</a>
                                </li>
                                <li class="nav-item">
                                     <a class="nav-link scrollto" (click)="goTo('buttons-section')">Credentials</a>
                                </li>
                                
                            </nav><!--//doc-menu-->
                        
                    </div>
                </div><!--//doc-sidebar-->
            </div><!--//doc-body-->              
        </div><!--//container-->
    </div><!--//doc-wrapper-->
    
    
    
</div><!--//page-wrapper-->

<footer class="footer text-center">
    <div class="container">
        <small class="copyright">docs by <a href="https://www.telemodem.cl/" target="_blank">Telemodem</a></small>
    </div><!--//container-->
</footer><!--//footer-->